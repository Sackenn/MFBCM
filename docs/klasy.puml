@startuml wzorzec_callback
skinparam backgroundColor #FFFFFF
skinparam shadowing false
skinparam classAttributeIconSize 0

' Styl inżynierski
skinparam class {
    BackgroundColor #F8F9FA
    BorderColor #343A40
    ArrowColor #343A40
}
skinparam interface {
    BackgroundColor #E8F5E9
    BorderColor #2E7D32
}

' Klasy i interfejsy z Twojego kodu
abstract class "javax.swing.SwingWorker<T, V>" as SwingWorker {
    # doInBackground() : T
    # process(chunks: List<V>) : void
    # done() : void
}

interface "<<interface>>\nBackupProgressCallback" as Callback {
    + onProgressUpdate(progress: BackupProgress) : void
    + onBackupComplete(result: BackupResult) : void
}

class "btg.gui.MainWindow" as MainWindow {
    - updateUITexts() : void
    + onProgressUpdate(progress: BackupProgress) : void
    + onBackupComplete(result: BackupResult) : void
}

class "btg.service.BackupService" as BackupService {
    - callback : BackupProgressCallback
    + BackupService(callback: BackupProgressCallback)
    # doInBackground() : Void
    # process(chunks: List<BackupProgress>) : void
}

class "<<record>>\nBackupProgress" as BackupProgress {
    + filesProcessed : int
    + bytesCopied : long
    + currentFileName : String
}

' Relacje
SwingWorker <|-- BackupService : " dziedziczy"
Callback <|.. MainWindow : " implementuje"
BackupService o-- Callback : " kompozycja\n(przez konstruktor)"
BackupService ..> BackupProgress : " publikuje\n(metoda publish())"
MainWindow ..> BackupProgress : " odbiera w EDT"

note right of BackupService
  Metoda **doInBackground()** działa
  w osobnym wątku.
  Za pomocą metody **publish()** wysyła obiekty **BackupProgress**.
end note

note bottom of MainWindow
  Aktualizuje paski postępu
  (JProgressBar) na podstawie
  danych z interfejsu zwrotnego,
  nie blokując wątku EDT.
end note

@enduml