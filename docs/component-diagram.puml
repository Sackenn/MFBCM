@startuml MFBCM_Component_Diagram

skinparam backgroundColor #FEFEFE
skinparam componentStyle rectangle

title Diagram Komponentów - Przepływ Danych MFBCM

' ===== KOMPONENTY =====
component "Main" as Main #FFFDE7
component "MainWindow" as MW #E1F5FE
component "FileListPanel" as FLP #E1F5FE
component "DuplicateViewerWindow" as DVW #E1F5FE

component "FileScanner" as FS #E8F5E9
component "BackupService" as BS #E8F5E9
component "DuplicateDetectionService" as DDS #E8F5E9
component "SyncService" as SS #E8F5E9
component "HashStorageService" as HSS #E8F5E9

component "BackupConfiguration" as BC #FFF3E0
component "BackupFile" as BF #FFF3E0
component "DuplicateAnalysisResult" as DAR #FFF3E0

component "MultiThreadedHashCalculator" as MTHC #F3E5F5
component "LanguageManager" as LM #F3E5F5

database "System Plików" as FS_DB
database "config.properties" as CFG
database ".mfbcm_hashes.json" as HASH_JSON

' ===== PRZEPŁYW =====
Main --> MW : uruchamia
MW --> FS : skanuje
MW --> BS : backup
MW --> DDS : duplikaty
MW --> SS : sync
MW --> BC : konfiguracja
MW --> FLP : wyświetla
MW --> DVW : otwiera

FS --> BF : tworzy
FS --> MTHC : hashuje
DDS --> MTHC : hashuje
DDS --> HSS : odczyt/zapis
DDS --> DAR : wynik

HSS --> HASH_JSON : JSON
BC --> CFG : properties

BS --> FS_DB : kopiuje
SS --> FS_DB : synchronizuje
FS --> FS_DB : skanuje

FLP --> BF : wyświetla
DVW --> DAR : wyświetla

MW --> LM : i18n

@enduml

