@startuml package_diagram
skinparam backgroundColor #FFFFFF
skinparam shadowing false
skinparam linetype ortho

skinparam package {
    BackgroundColor #F8F9FA
    BorderColor #343A40
    BorderThickness 2
    FontColor #000000
    FontSize 14
}

skinparam arrow {
    Color #495057
    Thickness 1.5
    FontSize 11
}

title Diagram Pakietów - MFBCM\n(Multimedia File Backup & Copy Manager)

' ===== PAKIETY APLIKACJI =====

package "org.example" {

    package "gui" as GUI #E3F2FD {
        class MainWindow
        class FileListPanel
        class DuplicateViewerWindow
        class ImagePreviewTooltip
        class UIConstants
        class WrapLayout
    }

    package "model" as MODEL #FFF3E0 {
        class BackupConfiguration
        class BackupFile
        class BackupProgress
        class SyncProgress
        class SyncResult
        class DuplicateAnalysisResult
        class DuplicatePair
    }

    package "service" as SERVICE #E8F5E9 {
        class FileScanner
        class BackupService
        class SyncService
        class DuplicateDetectionService
        class FileDeleteService
        class HashStorageService
        class ConfigurationPersistenceService
    }

    package "util" as UTIL #F3E5F5 {
        class FileUtilities
        class MultiThreadedHashCalculator
        class LanguageManager
    }

    class Main #FFF59D
}

' ===== PAKIETY ZEWNĘTRZNE =====

package "javax.swing" as SWING #FFEBEE {
}

package "java.awt" as AWT #FFEBEE {
}

package "java.nio" as NIO #FFEBEE {
}

package "java.util.concurrent" as CONCURRENT #FFEBEE {
}

package "com.fasterxml.jackson" as JACKSON #FFCDD2 {
}

package "net.openhft.hashing" as XXHASH #FFCDD2 {
}

package "org.apache.commons.io" as COMMONS_IO #FFCDD2 {
}

' ===== RELACJE MIĘDZY PAKIETAMI =====

' Main -> GUI
Main --> GUI : uruchamia

' GUI -> SERVICE
GUI --> SERVICE : wywołuje operacje

' GUI -> MODEL
GUI --> MODEL : wyświetla dane

' GUI -> UTIL
GUI --> UTIL : tłumaczenia, formatowanie

' SERVICE -> MODEL
SERVICE --> MODEL : tworzy i modyfikuje

' SERVICE -> UTIL
SERVICE --> UTIL : obliczenia hash, operacje I/O

' GUI -> SWING/AWT
GUI --> SWING : komponenty UI
GUI --> AWT : grafika, layout

' SERVICE -> NIO
SERVICE --> NIO : operacje plikowe

' SERVICE -> CONCURRENT
SERVICE --> CONCURRENT : wielowątkowość

' SERVICE -> JACKSON
SERVICE ..> JACKSON : serializacja JSON

' UTIL -> XXHASH
UTIL ..> XXHASH : algorytm hashujący

' UTIL -> COMMONS_IO
UTIL ..> COMMONS_IO : operacje plikowe

' UTIL -> NIO
UTIL --> NIO : operacje I/O

' ===== NOTATKI =====

note right of GUI
    **Warstwa Prezentacji**
    Swing + FlatLaf
    SwingWorker (async)
end note

note right of SERVICE
    **Warstwa Logiki**
    Skanowanie, Backup
    Sync, Deduplikacja
end note

note right of MODEL
    **Warstwa Danych**
    DTO, Konfiguracja
    Wyniki operacji
end note

note right of UTIL
    **Narzędzia**
    Hash, I/O, i18n
end note

' ===== LEGENDA =====

legend bottom
    |= Kolor |= Warstwa/Typ |
    | <#E3F2FD> | GUI (Prezentacja) |
    | <#E8F5E9> | Service (Logika) |
    | <#FFF3E0> | Model (Dane) |
    | <#F3E5F5> | Util (Narzędzia) |
    | <#FFF59D> | Punkt wejścia |
    | <#FFEBEE> | Java Standard Library |
    | <#FFCDD2> | Biblioteki zewnętrzne |
endlegend

@enduml

